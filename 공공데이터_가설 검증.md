## 가설


- 음주 여부에 따라 건강검진 수치 차이가 있을까?
- 신장과 허리둘레의 크기는 체중과 상관관계가 있을까?

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/corazzon/boostcourse-ds-510/blob/master/health_analysis-output.ipynb)


* 분석을 통해 가설을 검정해 봅니다.

## 라이브러리 로드


```python
# 분석에 사용할 pandas, 수치계산에 사용할 numpy, 시각화에 사용할 seaborn 을 불러옵니다.
# 또, 구 버전의 주피터 노트북에서는 %matplotlib inline 설정을 되어야 노트북 안에서 그래프를 시각화 합니다.

import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt

%matplotlib inline
```

## 한글폰트 설정


```python
# 한글폰트를 설정해 주지 않으면 그래프 상에서 한글이 깨져보입니다.
# 한글이 출력될 수 있도록 폰트 설정을 해줍니다.
# 운영체제별 설정을 위해 로드 합니다.
import os

# 윈도우, 맥 외의 OS는 별도로 설정해 주세요.
if os.name == 'posix':
    plt.rc("font", family="AppleGothic")
else:
    plt.rc("font", family="Malgun Gothic")
# 마이너스 폰트 깨지는 문제에 대한 대처
plt.rc("axes", unicode_minus=False)


# 레티나 설정을 해주면 글씨가 좀 더 선명하게 보입니다.
# 폰트의 주변이 흐릿하게 보이는 것을 방지합니다.


%config InlineBackend.figure_format = 'retina'
```

## 데이터 불러오기

* 건강검진정보란 국민건강보험의 직장가입자와 40세 이상의 피부양자, 세대주인 지역가입자와 40세 이상의 지역가입자의 일반건강검진 결과와 이들 일반건강검진 대상자 중에 만40세와 만66세에 도달한 이들이 받게 되는 생애전환기건강진단 수검이력이 있는 각 연도별 수진자 100만 명에 대한 기본정보(성, 연령대, 시도코드 등)와 검진내역(신장, 체중, 총콜레스테롤, 혈색소 등)으로 구성된 개방데이터입니다.

<img src="https://i.imgur.com/Twtlh6W.png">

<img src="https://i.imgur.com/GJqg05v.png">


공공데이터 개방서비스( http://nhiss.nhis.or.kr/op/it/index.do )에서도 다운로드 받을 수 있음.

* 건강검진정보(2017) 다운로드 받기 : https://www.data.go.kr/dataset/15007122/fileData.do
* 2018년 데이터로 실습을 하셔도 됩니다. 다만 encoding과 컬럼명이 달라서 2018년 데이터에 맞게 고쳐주시면 됩니다.
* 2018년 외 다른 연도의 데이터로도 실습을 하고자 한다면 컬럼명과 인코딩에 주의해 주세요.


```python
# 다운로드 받은 파일을 판다스의 read_csv 를 통해 읽어옵니다.
# 파일을 읽어온 후 shape 로 행과 열의 수를 출력합니다.

df = pd.read_csv("data/NHIS_OPEN_GJ_2017.CSV", encoding="cp949")
df.shape
```




    (1000000, 34)



### 데이터 미리보기


```python
# sample, head, tail을 통해 데이터를 미리보기 합니다.
df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준년도</th>
      <th>가입자일련번호</th>
      <th>성별코드</th>
      <th>연령대코드(5세단위)</th>
      <th>시도코드</th>
      <th>신장(5Cm단위)</th>
      <th>체중(5Kg단위)</th>
      <th>허리둘레</th>
      <th>시력(좌)</th>
      <th>시력(우)</th>
      <th>...</th>
      <th>감마지티피</th>
      <th>흡연상태</th>
      <th>음주여부</th>
      <th>구강검진수검여부</th>
      <th>치아우식증유무</th>
      <th>결손치유무</th>
      <th>치아마모증유무</th>
      <th>제3대구치(사랑니)이상</th>
      <th>치석</th>
      <th>데이터공개일자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017</td>
      <td>1</td>
      <td>1</td>
      <td>8</td>
      <td>43</td>
      <td>170</td>
      <td>75</td>
      <td>90.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>40.0</td>
      <td>1.0</td>
      <td>Y</td>
      <td>Y</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Y</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017</td>
      <td>2</td>
      <td>1</td>
      <td>7</td>
      <td>11</td>
      <td>180</td>
      <td>80</td>
      <td>89.0</td>
      <td>0.9</td>
      <td>1.2</td>
      <td>...</td>
      <td>27.0</td>
      <td>3.0</td>
      <td>N</td>
      <td>Y</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017</td>
      <td>3</td>
      <td>1</td>
      <td>9</td>
      <td>41</td>
      <td>165</td>
      <td>75</td>
      <td>91.0</td>
      <td>1.2</td>
      <td>1.5</td>
      <td>...</td>
      <td>68.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>N</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2017</td>
      <td>4</td>
      <td>1</td>
      <td>11</td>
      <td>48</td>
      <td>175</td>
      <td>80</td>
      <td>91.0</td>
      <td>1.5</td>
      <td>1.2</td>
      <td>...</td>
      <td>18.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>Y</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>N</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2017</td>
      <td>5</td>
      <td>1</td>
      <td>11</td>
      <td>30</td>
      <td>165</td>
      <td>60</td>
      <td>80.0</td>
      <td>1.0</td>
      <td>1.2</td>
      <td>...</td>
      <td>25.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>Y</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>N</td>
      <td>2018-11-26</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 34 columns</p>
</div>




```python
df.tail()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준년도</th>
      <th>가입자일련번호</th>
      <th>성별코드</th>
      <th>연령대코드(5세단위)</th>
      <th>시도코드</th>
      <th>신장(5Cm단위)</th>
      <th>체중(5Kg단위)</th>
      <th>허리둘레</th>
      <th>시력(좌)</th>
      <th>시력(우)</th>
      <th>...</th>
      <th>감마지티피</th>
      <th>흡연상태</th>
      <th>음주여부</th>
      <th>구강검진수검여부</th>
      <th>치아우식증유무</th>
      <th>결손치유무</th>
      <th>치아마모증유무</th>
      <th>제3대구치(사랑니)이상</th>
      <th>치석</th>
      <th>데이터공개일자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>999995</th>
      <td>2017</td>
      <td>999996</td>
      <td>1</td>
      <td>10</td>
      <td>48</td>
      <td>175</td>
      <td>80</td>
      <td>92.1</td>
      <td>1.5</td>
      <td>1.5</td>
      <td>...</td>
      <td>27.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>N</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>999996</th>
      <td>2017</td>
      <td>999997</td>
      <td>1</td>
      <td>8</td>
      <td>41</td>
      <td>170</td>
      <td>75</td>
      <td>86.0</td>
      <td>1.0</td>
      <td>1.5</td>
      <td>...</td>
      <td>15.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>N</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>999997</th>
      <td>2017</td>
      <td>999998</td>
      <td>2</td>
      <td>9</td>
      <td>26</td>
      <td>155</td>
      <td>50</td>
      <td>68.0</td>
      <td>1.0</td>
      <td>0.7</td>
      <td>...</td>
      <td>17.0</td>
      <td>3.0</td>
      <td>Y</td>
      <td>N</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>999998</th>
      <td>2017</td>
      <td>999999</td>
      <td>1</td>
      <td>6</td>
      <td>29</td>
      <td>175</td>
      <td>60</td>
      <td>72.0</td>
      <td>1.5</td>
      <td>1.0</td>
      <td>...</td>
      <td>17.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>N</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
    <tr>
      <th>999999</th>
      <td>2017</td>
      <td>1000000</td>
      <td>1</td>
      <td>11</td>
      <td>41</td>
      <td>160</td>
      <td>70</td>
      <td>90.5</td>
      <td>1.0</td>
      <td>1.5</td>
      <td>...</td>
      <td>36.0</td>
      <td>3.0</td>
      <td>Y</td>
      <td>N</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2018-11-26</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 34 columns</p>
</div>




```python
df.sample()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준년도</th>
      <th>가입자일련번호</th>
      <th>성별코드</th>
      <th>연령대코드(5세단위)</th>
      <th>시도코드</th>
      <th>신장(5Cm단위)</th>
      <th>체중(5Kg단위)</th>
      <th>허리둘레</th>
      <th>시력(좌)</th>
      <th>시력(우)</th>
      <th>...</th>
      <th>감마지티피</th>
      <th>흡연상태</th>
      <th>음주여부</th>
      <th>구강검진수검여부</th>
      <th>치아우식증유무</th>
      <th>결손치유무</th>
      <th>치아마모증유무</th>
      <th>제3대구치(사랑니)이상</th>
      <th>치석</th>
      <th>데이터공개일자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>952274</th>
      <td>2017</td>
      <td>952275</td>
      <td>2</td>
      <td>10</td>
      <td>45</td>
      <td>160</td>
      <td>50</td>
      <td>68.0</td>
      <td>1.0</td>
      <td>1.2</td>
      <td>...</td>
      <td>16.0</td>
      <td>1.0</td>
      <td>Y</td>
      <td>Y</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Y</td>
      <td>2018-11-26</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 34 columns</p>
</div>



## 기본정보 보기


```python
# info를 통해 데이터의 크기, 형식, 메모리 사용량 등을 봅니다.
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 1000000 entries, 0 to 999999
    Data columns (total 34 columns):
     #   Column        Non-Null Count    Dtype  
    ---  ------        --------------    -----  
     0   기준년도          1000000 non-null  int64  
     1   가입자일련번호       1000000 non-null  int64  
     2   성별코드          1000000 non-null  int64  
     3   연령대코드(5세단위)   1000000 non-null  int64  
     4   시도코드          1000000 non-null  int64  
     5   신장(5Cm단위)     1000000 non-null  int64  
     6   체중(5Kg단위)     1000000 non-null  int64  
     7   허리둘레          999734 non-null   float64
     8   시력(좌)         999817 non-null   float64
     9   시력(우)         999811 non-null   float64
     10  청력(좌)         999842 non-null   float64
     11  청력(우)         999844 non-null   float64
     12  수축기혈압         999981 non-null   float64
     13  이완기혈압         999982 non-null   float64
     14  식전혈당(공복혈당)    999958 non-null   float64
     15  총콜레스테롤        999957 non-null   float64
     16  트리글리세라이드      999955 non-null   float64
     17  HDL콜레스테롤      999956 non-null   float64
     18  LDL콜레스테롤      997088 non-null   float64
     19  혈색소           999948 non-null   float64
     20  요단백           995408 non-null   float64
     21  혈청크레아티닌       999957 non-null   float64
     22  (혈청지오티)AST    999959 non-null   float64
     23  (혈청지오티)ALT    999958 non-null   float64
     24  감마지티피         999958 non-null   float64
     25  흡연상태          999856 non-null   float64
     26  음주여부          999464 non-null   object 
     27  구강검진수검여부      1000000 non-null  object 
     28  치아우식증유무       0 non-null        float64
     29  결손치유무         0 non-null        float64
     30  치아마모증유무       0 non-null        float64
     31  제3대구치(사랑니)이상  0 non-null        float64
     32  치석            378578 non-null   object 
     33  데이터공개일자       1000000 non-null  object 
    dtypes: float64(23), int64(7), object(4)
    memory usage: 259.4+ MB



```python
# 컬럼의 수 34, 컬럼만 따로 출력합니다.

df.columns
```




    Index(['기준년도', '가입자일련번호', '성별코드', '연령대코드(5세단위)', '시도코드', '신장(5Cm단위)',
           '체중(5Kg단위)', '허리둘레', '시력(좌)', '시력(우)', '청력(좌)', '청력(우)', '수축기혈압',
           '이완기혈압', '식전혈당(공복혈당)', '총콜레스테롤', '트리글리세라이드', 'HDL콜레스테롤', 'LDL콜레스테롤',
           '혈색소', '요단백', '혈청크레아티닌', '(혈청지오티)AST', '(혈청지오티)ALT', '감마지티피', '흡연상태',
           '음주여부', '구강검진수검여부', '치아우식증유무', '결손치유무', '치아마모증유무', '제3대구치(사랑니)이상', '치석',
           '데이터공개일자'],
          dtype='object')




```python
# dtypes 를 통해 데이터 형식만 출력합니다.

df.dtypes
```




    기준년도              int64
    가입자일련번호           int64
    성별코드              int64
    연령대코드(5세단위)       int64
    시도코드              int64
    신장(5Cm단위)         int64
    체중(5Kg단위)         int64
    허리둘레            float64
    시력(좌)           float64
    시력(우)           float64
    청력(좌)           float64
    청력(우)           float64
    수축기혈압           float64
    이완기혈압           float64
    식전혈당(공복혈당)      float64
    총콜레스테롤          float64
    트리글리세라이드        float64
    HDL콜레스테롤        float64
    LDL콜레스테롤        float64
    혈색소             float64
    요단백             float64
    혈청크레아티닌         float64
    (혈청지오티)AST      float64
    (혈청지오티)ALT      float64
    감마지티피           float64
    흡연상태            float64
    음주여부             object
    구강검진수검여부         object
    치아우식증유무         float64
    결손치유무           float64
    치아마모증유무         float64
    제3대구치(사랑니)이상    float64
    치석               object
    데이터공개일자          object
    dtype: object



## 결측치 보기


```python
# isnull 을 통해 결측치를 bool 값으로 표시하고 sum을 하면 컬럼마다의 결측치 수를 세어줍니다.

df.isnull().sum()
```




    기준년도                  0
    가입자일련번호               0
    성별코드                  0
    연령대코드(5세단위)           0
    시도코드                  0
    신장(5Cm단위)             0
    체중(5Kg단위)             0
    허리둘레                266
    시력(좌)               183
    시력(우)               189
    청력(좌)               158
    청력(우)               156
    수축기혈압                19
    이완기혈압                18
    식전혈당(공복혈당)           42
    총콜레스테롤               43
    트리글리세라이드             45
    HDL콜레스테롤             44
    LDL콜레스테롤           2912
    혈색소                  52
    요단백                4592
    혈청크레아티닌              43
    (혈청지오티)AST           41
    (혈청지오티)ALT           42
    감마지티피                42
    흡연상태                144
    음주여부                536
    구강검진수검여부              0
    치아우식증유무         1000000
    결손치유무           1000000
    치아마모증유무         1000000
    제3대구치(사랑니)이상    1000000
    치석               621422
    데이터공개일자               0
    dtype: int64




```python
# isna로도 결측치 여부를 확인하고 sum을 통해 결측치 수를 집계할 수 있습니다.

df.isna().sum()
```




    기준년도                  0
    가입자일련번호               0
    성별코드                  0
    연령대코드(5세단위)           0
    시도코드                  0
    신장(5Cm단위)             0
    체중(5Kg단위)             0
    허리둘레                266
    시력(좌)               183
    시력(우)               189
    청력(좌)               158
    청력(우)               156
    수축기혈압                19
    이완기혈압                18
    식전혈당(공복혈당)           42
    총콜레스테롤               43
    트리글리세라이드             45
    HDL콜레스테롤             44
    LDL콜레스테롤           2912
    혈색소                  52
    요단백                4592
    혈청크레아티닌              43
    (혈청지오티)AST           41
    (혈청지오티)ALT           42
    감마지티피                42
    흡연상태                144
    음주여부                536
    구강검진수검여부              0
    치아우식증유무         1000000
    결손치유무           1000000
    치아마모증유무         1000000
    제3대구치(사랑니)이상    1000000
    치석               621422
    데이터공개일자               0
    dtype: int64




```python
# 판다스에 내장 된 plot을 통해 시각화를 합니다.

df.isnull().sum().plot.barh(figsize=(10, 9))
```




    <AxesSubplot:>




    
![png](output_18_1.png)
    


## 일부 데이터 요약하기


```python
# 여러 컬럼을 가져옵니다. 
# "(혈청지오티)ALT", "(혈청지오티)AST" 를 가져와 미리보기 합니다.

df[["(혈청지오티)ALT", "(혈청지오티)AST"]].head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>(혈청지오티)ALT</th>
      <th>(혈청지오티)AST</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>35.0</td>
      <td>21.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>36.0</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>32.0</td>
      <td>47.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>34.0</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12.0</td>
      <td>19.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# "(혈청지오티)ALT", "(혈청지오티)AST" 를 요약합니다.

df[["(혈청지오티)ALT", "(혈청지오티)AST"]].describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>(혈청지오티)ALT</th>
      <th>(혈청지오티)AST</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>999958.000000</td>
      <td>999959.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>25.749509</td>
      <td>25.994671</td>
    </tr>
    <tr>
      <th>std</th>
      <td>26.294770</td>
      <td>23.587469</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>15.000000</td>
      <td>19.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>20.000000</td>
      <td>23.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>29.000000</td>
      <td>28.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>7210.000000</td>
      <td>9999.000000</td>
    </tr>
  </tbody>
</table>
</div>



## value_counts 로 값 집계하기


```python
# "성별코드"로 그룹화 하고 value_counts 를 통해 갯수를 집계합니다.

df["성별코드"].value_counts()
```




    1    530410
    2    469590
    Name: 성별코드, dtype: int64




```python
# "흡연상태"로 그룹화 하고 value_counts 를 통해 갯수를 집계합니다.

df["흡연상태"].value_counts()
```




    1.0    607942
    3.0    215702
    2.0    176212
    Name: 흡연상태, dtype: int64



## groupby 와 pivot_table 사용하기

- df.groupby([""])["value"].count()
- df.groupby([""])["value"].mean()
- df.groupby([""])["value"].describe()
 
 
- df.groupby([""])["value"].agg(["","",""])



### groupby


```python
# groupby를 통해 데이터를 그룹화 합니다.

# 성별코드로 그룹화 후 key 데이터를 세어 봅니다.

df.groupby(["성별코드"])["가입자일련번호"].count()
```




    성별코드
    1    530410
    2    469590
    Name: 가입자일련번호, dtype: int64




```python
# 성별코드와 음주여부로 그룹화를 하고 갯수를 세어 봅니다.

df.groupby(["성별코드", "음주여부"])["가입자일련번호"].count()
```




    성별코드  음주여부
    1     N       173612
          Y       356587
    2     N       326827
          Y       142438
    Name: 가입자일련번호, dtype: int64




```python
# 성별코드와 음주여부로 그룹화를 하고 감마지티피의 평균을 구합니다.

df.groupby(["성별코드", "음주여부"])["감마지티피"].mean()
```




    성별코드  음주여부
    1     N       34.739868
          Y       56.610981
    2     N       22.612408
          Y       25.001018
    Name: 감마지티피, dtype: float64




```python
# 성별코드와 음주여부로 그룹화를 하고 감마지티피의 요약수치를 구합니다.

df.groupby(["성별코드", "음주여부"])["감마지티피"].describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>성별코드</th>
      <th>음주여부</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>N</th>
      <td>173604.0</td>
      <td>34.739868</td>
      <td>37.606197</td>
      <td>1.0</td>
      <td>18.0</td>
      <td>25.0</td>
      <td>38.0</td>
      <td>999.0</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>356576.0</td>
      <td>56.610981</td>
      <td>68.851128</td>
      <td>1.0</td>
      <td>24.0</td>
      <td>37.0</td>
      <td>63.0</td>
      <td>999.0</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">2</th>
      <th>N</th>
      <td>326813.0</td>
      <td>22.612408</td>
      <td>25.203579</td>
      <td>1.0</td>
      <td>13.0</td>
      <td>17.0</td>
      <td>24.0</td>
      <td>999.0</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>142429.0</td>
      <td>25.001018</td>
      <td>36.725100</td>
      <td>1.0</td>
      <td>13.0</td>
      <td>17.0</td>
      <td>25.0</td>
      <td>999.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# agg을 사용하면 여러 수치를 함께 구할 수 있습니다.

df.groupby(["성별코드", "음주여부"])["감마지티피"].agg(["count", "mean", "median"])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>median</th>
    </tr>
    <tr>
      <th>성별코드</th>
      <th>음주여부</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>N</th>
      <td>173604</td>
      <td>34.739868</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>356576</td>
      <td>56.610981</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">2</th>
      <th>N</th>
      <td>326813</td>
      <td>22.612408</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>142429</td>
      <td>25.001018</td>
      <td>17.0</td>
    </tr>
  </tbody>
</table>
</div>



### pivot_table
* https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html


- df.pivot_table(index,value,aggfunc)


```python
# 음주여부에 따른 그룹화된 수를 피봇테이블로 구합니다.

df.pivot_table(index="음주여부", values="가입자일련번호", aggfunc="count")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>가입자일련번호</th>
    </tr>
    <tr>
      <th>음주여부</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>N</th>
      <td>500439</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>499025</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 음주여부에 따른 감마지티피의 평균(default) 을 구합니다.

pd.pivot_table(df, index="음주여부", values="감마지티피")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>감마지티피</th>
    </tr>
    <tr>
      <th>음주여부</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>N</th>
      <td>26.819650</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>47.588675</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 기본값은 평균을 구하지만 aggfunc을 통해 지정해 줄 수도 있습니다.

pd.pivot_table(df, index="음주여부", values="감마지티피", aggfunc='mean')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>감마지티피</th>
    </tr>
    <tr>
      <th>음주여부</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>N</th>
      <td>26.819650</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>47.588675</td>
    </tr>
  </tbody>
</table>
</div>




```python
# aggfunc에 여러 값을 한번에 지정할 수도 있습니다.

pd.pivot_table(df, index="음주여부", values="감마지티피", aggfunc=["mean", "median"])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>mean</th>
      <th>median</th>
    </tr>
    <tr>
      <th></th>
      <th>감마지티피</th>
      <th>감마지티피</th>
    </tr>
    <tr>
      <th>음주여부</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>N</th>
      <td>26.819650</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>47.588675</td>
      <td>30.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# aggfunc에 describe를 사용해 통계요약값을 한번에 볼 수도 있습니다.

pd.pivot_table(df, index="음주여부", values="감마지티피", aggfunc="describe")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>count</th>
      <th>max</th>
      <th>mean</th>
      <th>min</th>
      <th>std</th>
    </tr>
    <tr>
      <th>음주여부</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>N</th>
      <td>14.0</td>
      <td>19.0</td>
      <td>29.0</td>
      <td>500417.0</td>
      <td>999.0</td>
      <td>26.819650</td>
      <td>1.0</td>
      <td>30.639714</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>18.0</td>
      <td>30.0</td>
      <td>52.0</td>
      <td>499005.0</td>
      <td>999.0</td>
      <td>47.588675</td>
      <td>1.0</td>
      <td>63.056912</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 성별코드, 음주여부에 따른 감마지티피 값의 평균을 구합니다.

pd.pivot_table(df, index=["성별코드", "음주여부"], values="감마지티피", aggfunc="describe")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>count</th>
      <th>max</th>
      <th>mean</th>
      <th>min</th>
      <th>std</th>
    </tr>
    <tr>
      <th>성별코드</th>
      <th>음주여부</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>N</th>
      <td>18.0</td>
      <td>25.0</td>
      <td>38.0</td>
      <td>173604.0</td>
      <td>999.0</td>
      <td>34.739868</td>
      <td>1.0</td>
      <td>37.606197</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>24.0</td>
      <td>37.0</td>
      <td>63.0</td>
      <td>356576.0</td>
      <td>999.0</td>
      <td>56.610981</td>
      <td>1.0</td>
      <td>68.851128</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">2</th>
      <th>N</th>
      <td>13.0</td>
      <td>17.0</td>
      <td>24.0</td>
      <td>326813.0</td>
      <td>999.0</td>
      <td>22.612408</td>
      <td>1.0</td>
      <td>25.203579</td>
    </tr>
    <tr>
      <th>Y</th>
      <td>13.0</td>
      <td>17.0</td>
      <td>25.0</td>
      <td>142429.0</td>
      <td>999.0</td>
      <td>25.001018</td>
      <td>1.0</td>
      <td>36.725100</td>
    </tr>
  </tbody>
</table>
</div>



## 전체 데이터 시각화 


* 100만개가 넘는 데이터를 시각화할 때는 되도록이면 groupby 혹은 pivot_table로 연산을 하고 시각화를 하는 것을 권장합니다.
* 100만개가 넘는 데이터를 seaborn과 같은 고급 통계 연산을 하는 그래프를 사용하게 되면 많이 느릴 수 있습니다.

### 히스토그램

* 판다스의 df.info() 기능을 통해 대부분 수치 데이터(flaot, int)로 이루어 진것을 확인할 수 있었습니다. 


* 히스토그램을 사용하면 __수치데이터를 bin 의 갯수만큼 그룹화 해서 도수분포표를 만들고 그 결과를 시각화__ 합니다.


* 이 데이터에는 수치데이터가 많기 때문에 판다스의 hist를 사용해서 히스토그램을 그립니다.


```python
# 전체 데이터에 대한 히스토그램을 출력합니다.

h = df.hist(figsize=(16, 16))
```


    
![png](output_41_0.png)
    


### 슬라이싱을 사용해 히스토그램 시각화


* 슬라이싱 기능을 사용해서 데이터를 나누어 그립니다.
* 슬라이싱 사용시 iloc를 활용하면 인덱스의 순서대로 슬라이싱이 가능합니다.
* iloc[행, 열] 순으로 인덱스를 써주면 해당 인덱스만 불러오며, 전체 데이터를 가져오고자 할 때는 [:, :]을 사용합니다.
* 슬라이싱을 해주는 대괄호 안의 콜론 앞뒤에 숫자를 써주게 되면 해당 시작인덱스:끝나는인덱스(+1)를 지정할 수 있습니다.


```python
# 슬라이싱을 사용해 앞에서 12개 컬럼에 대한 데이터로 히스토그램을 그립니다.
# [행, 열]

# [전체행, 0~11+1] 열로 index 11까지 (12개)

h = df.iloc[:, :12].hist(figsize=(12, 12))
```


    
![png](output_43_0.png)
    



```python
# 슬라이싱을 사용해 앞에서 12번째부터 23번째까지(12:24) 컬럼에 대한 데이터로 히스토그램을 그립니다.

h = df.iloc[:, 12:24].hist(figsize=(12, 12), bins=100)
```


    
![png](output_44_0.png)
    



```python
# 슬라이싱을 사용해 앞에서 24번째부터 마지막까지(24:) 컬럼에 대한 데이터로 히스토그램을 그립니다.

h = df.iloc[:, 24:].hist(figsize=(12, 12), bins=10)
```


    
![png](output_45_0.png)
    


## 샘플데이터 추출하기


* __seaborn 의 그래프는 내부에서 수학적 연산이 되기 때문에 데이터가 많으면 속도가 오래 걸립니다.__

* 따라서 전체 데이터를 사용하면 너무 느리기 때문에, __일부만 샘플링해서 사용합니다.__


```python
# df.sample을 통해 일부 데이터만 샘플데이터만 추출합니다. 

# 실험을 통제하기 위해 random_state를 고정하기도 합니다. random_state 를 사용해 샘플링되는 값을 고정할 수 있습니다.
# random_state 값은 높든 낮든 상관 없이 값을 고정시키는 역할만 합니다.

df_sample = df.sample(1000, random_state=1)
df_sample.shape
```




    (1000, 34)



## seaborn ( 데이터 시각화 도구 )
* https://seaborn.pydata.org/
* __seaborn 은 https://matplotlib.org/ 을 사용하기 쉽게 만들어 졌으며, 간단하게 고급 통계 연산을 할 수 있습니다.__

## 범주형(카테고리) 데이터 시각화


* countplot은 범주형 데이터의 수를 더한 값을 그래프로 표현합니다.
* value_counts 로 구한 값을 시각화 한다고 보면 됩니다.


- df[].value_counts().plot.bar()
- sns.countplot(data,x)

### countplot - 음주여부


```python
# pandas 제공 기본 plot 음주여부에 따른 countplot을 그립니다.

df["음주여부"].value_counts().plot.bar(rot=30)
```




    <AxesSubplot:>




    
![png](output_51_1.png)
    



```python
# seaborn 음주여부에 따른 countplot을 그립니다.

sns.countplot(data=df,x="음주여부")
```




    <AxesSubplot:xlabel='음주여부', ylabel='count'>




    
![png](output_52_1.png)
    


### hue 옵션 사용하기


```python
# seaborn 에서 제공하는 폰트 설정
sns.set(font_scale=1, font="AppleGothic")

# 음주여부에 따른 countplot을 그리고 hue 를 사용해 성별코드로 색상을 구분
sns.countplot(data=df, x="음주여부", hue="성별코드")
```




    <AxesSubplot:xlabel='음주여부', ylabel='count'>




    
![png](output_54_1.png)
    



```python
# countplot으로 연령대별 음주여부를 봅니다.
# hue를 사용해 다른 색상으로 표현합니다.

sns.countplot(data=df, x="연령대코드(5세단위)", hue="음주여부")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='count'>




    
![png](output_55_1.png)
    


### countplot - 키와 몸무게

* 키와 몸무게는 연속형 데이터 라고 볼 수 있습니다. 
* 하지만 이 데이터는 키는 5cm, 체중은 5kg __단위__로 되어 있습니다. 이렇게 __연속형 데이터가 특정 범위로 묶게 되면 범주형 데이터로 해석__할 수 있습니다.


- 연속형 데이터는  bin으로 특정 범위로 묶은 후 count


```python
# counplot으로 키를 봅니다.

plt.figure(figsize=(15, 4))

sns.countplot(data=df, x="신장(5Cm단위)")

```




    <AxesSubplot:xlabel='신장(5Cm단위)', ylabel='count'>




    
![png](output_57_1.png)
    



```python
# counplot으로 체중을 봅니다.

plt.figure(figsize=(15, 4))
sns.countplot(data=df, x="체중(5Kg단위)")
```




    <AxesSubplot:xlabel='체중(5Kg단위)', ylabel='count'>




    
![png](output_58_1.png)
    



```python
# counplot으로 신장(5Cm단위)를 봅니다.
# 성별에 따른 키의 차이를 봅니다.

plt.figure(figsize=(15, 4))
sns.countplot(data=df, x="신장(5Cm단위)", hue="성별코드")
```




    <AxesSubplot:xlabel='신장(5Cm단위)', ylabel='count'>




    
![png](output_59_1.png)
    



```python
# 성별에 따른 체중의 차이를 봅니다.

plt.figure(figsize=(15, 4))
sns.countplot(data=df, x="체중(5Kg단위)", hue="성별코드")
```




    <AxesSubplot:xlabel='체중(5Kg단위)', ylabel='count'>




    
![png](output_60_1.png)
    


### barplot - 수치형 vs 범주형 데이터 시각화


```python
# 연령대코드와 총 콜레스테롤을 봅니다.
# hue 로 색상을 다르게 표현할 수 있습니다. 음주여부를 함께 봅니다.

plt.figure(figsize=(15,4))
sns.barplot(data=df_sample, x="연령대코드(5세단위)", y="총콜레스테롤", hue="음주여부")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='총콜레스테롤'>




    
![png](output_62_1.png)
    



```python
# 연령대코드와 총 콜레스테롤을 봅니다.
# 콜레스테롤과 연령대코드(5세단위)를 흡연상태에 따라 barplot으로 그립니다.

plt.figure(figsize=(15, 4))
sns.barplot(data=df_sample, x="연령대코드(5세단위)", y="총콜레스테롤", hue="흡연상태")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='총콜레스테롤'>




    
![png](output_63_1.png)
    



```python
# 트리글리세라이드(중성지방) 에 따른 연령대코드(5세단위)를 음주여부에 따라 barplot으로 그립니다.

plt.figure(figsize=(15, 4))
sns.barplot(data=df, x="연령대코드(5세단위)", y="트리글리세라이드", hue="음주여부", ci=None)
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='트리글리세라이드'>




    
![png](output_64_1.png)
    



```python
# 연령대코드와 체중(5Kg 단위)을 성별에 따라 봅니다.


plt.figure(figsize=(15, 4))
sns.barplot(data=df, x="연령대코드(5세단위)", y="체중(5Kg단위)", hue="성별코드", ci=None)
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='체중(5Kg단위)'>




    
![png](output_65_1.png)
    



```python
# 연령대코드(5세단위) 에 따른 체중(5Kg 단위) 을 음주여부에 따라 barplot으로 그립니다.

plt.figure(figsize=(15, 4))

sns.barplot(data=df, x="연령대코드(5세단위)", y="체중(5Kg단위)", hue="음주여부", ci="sd")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='체중(5Kg단위)'>




    
![png](output_66_1.png)
    


### lineplot and pointplot


```python
# 연령대코드(5세단위) 에 따른 체중(5Kg 단위) 을 성별코드에 따라 lineplot으로 그립니다.


plt.figure(figsize=(15, 4))
sns.lineplot(data=df_sample, x="연령대코드(5세단위)", y="체중(5Kg단위)", hue="성별코드", ci="sd")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='체중(5Kg단위)'>




    
![png](output_68_1.png)
    



```python
# 연령대코드(5세단위) 에 따른 신장(5Cm단위) 을 성별코드에 따라 lineplot으로 그립니다.

plt.figure(figsize=(15, 4))
sns.lineplot(data=df_sample, x="연령대코드(5세단위)", y="신장(5Cm단위)", hue="성별코드", ci="sd")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='신장(5Cm단위)'>




    
![png](output_69_1.png)
    



```python
# 연령대코드(5세단위) 에 따른 체중(5Kg 단위) 을 음주여부에 따라 pointplot과 barplot으로 그립니다.


plt.figure(figsize=(15, 4))
sns.barplot(data=df_sample, x="연령대코드(5세단위)", y="신장(5Cm단위)", hue="음주여부", ci="sd")


```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='신장(5Cm단위)'>




    
![png](output_70_1.png)
    



```python
plt.figure(figsize=(15, 4))

sns.pointplot(data=df_sample, x="연령대코드(5세단위)", y="신장(5Cm단위)", hue="음주여부", ci="sd")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='신장(5Cm단위)'>




    
![png](output_71_1.png)
    



```python
# 연령대코드(5세단위) 에 따른 신장(5Cm단위) 을 성별코드에 따라 pointplot으로 그립니다.

plt.figure(figsize=(15, 4))
sns.pointplot(data=df_sample, x="연령대코드(5세단위)", y="신장(5Cm단위)", hue="성별코드", ci="sd")
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='신장(5Cm단위)'>




    
![png](output_72_1.png)
    



```python
# 연령대코드(5세단위) 에 따른 혈색소를 음주여부에 따라 lineplot으로 그립니다.

plt.figure(figsize=(15, 4))
sns.lineplot(data=df, x="연령대코드(5세단위)", y="혈색소", hue="음주여부", ci=None)
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='혈색소'>




    
![png](output_73_1.png)
    


### boxplot

* https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html
* https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.boxplot.html



* [상자 수염 그림 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%EC%83%81%EC%9E%90_%EC%88%98%EC%97%BC_%EA%B7%B8%EB%A6%BC)
* 가공하지 않은 자료 그대로를 이용하여 그린 것이 아니라, 자료로부터 얻어낸 통계량인 5가지 요약 수치로 그린다.
* 5가지 요약 수치란 기술통계학에서 자료의 정보를 알려주는 아래의 다섯 가지 수치를 의미한다.


1. 최솟값
1. 제 1사분위수
1. 제 2사분위수( ), 즉 중앙값
1. 제 3 사분위 수( )
1. 최댓값

* Box plot 이해하기 : 
    * [박스 플롯에 대하여 :: -[|]- Box and Whisker](https://boxnwhis.kr/2019/02/19/boxplot.html)
    * [Understanding Boxplots – Towards Data Science](https://towardsdatascience.com/understanding-boxplots-5e2df7bcbd51)


```python
# boxplot으로 신장(5Cm단위) 에 따른 체중(5Kg 단위) 을 그리며, 성별코드에 따라 다른 색상으로 표현되게 합니다.

plt.figure(figsize=(15, 4))
sns.boxplot(data=df, x="신장(5Cm단위)", y="체중(5Kg단위)", hue="성별코드")
```




    <AxesSubplot:xlabel='신장(5Cm단위)', ylabel='체중(5Kg단위)'>




    
![png](output_75_1.png)
    


### violinplot


```python
# violinplot 신장(5Cm단위)에 따른 체중(5Kg 단위) 을 그리며, 음주여부에 따라 다른 색상으로 표현되게 합니다.
plt.figure(figsize=(15, 4))
sns.violinplot(data=df_sample, x="신장(5Cm단위)", y="체중(5Kg단위)", hue="음주여부")
```




    <AxesSubplot:xlabel='신장(5Cm단위)', ylabel='체중(5Kg단위)'>




    
![png](output_77_1.png)
    



```python
# violinplot의 split 기능을 사용해 봅니다. 

plt.figure(figsize=(15, 4))
sns.violinplot(data=df_sample, x="신장(5Cm단위)", y="체중(5Kg단위)", hue="음주여부", split=True)
```




    <AxesSubplot:xlabel='신장(5Cm단위)', ylabel='체중(5Kg단위)'>




    
![png](output_78_1.png)
    



```python
# violinplot 연령대코드(5세단위)에 따른 혈색소를 그리며, 음주여부에 따라 다른 색상으로 표현되게 합니다.

plt.figure(figsize=(15, 4))
sns.violinplot(data=df_sample, x="연령대코드(5세단위)", y="혈색소", hue="음주여부", split=True)
```




    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='혈색소'>




    
![png](output_79_1.png)
    


### swarm plot
* 범주형 데이터를 산점도로 시각화하고자 할 때 사용합니다.


```python
# swarmplot으로 신장(5Cm단위)에 따른 체중(5Kg 단위) 을 그리며, 음주여부에 따라 다른 색상으로 표현되게 합니다.
# 점을 하나씩 찍기 때문에 오래 걸리는 코드는 전체로 그려보기 전에 일부만 가져와 그려봅니다.

plt.figure(figsize=(15, 4))
sns.swarmplot(data=df_sample, x="신장(5Cm단위)", y="체중(5Kg단위)", hue="음주여부")
```

    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 9.5% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 36.3% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 43.5% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 48.9% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 47.2% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 19.4% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)





    <AxesSubplot:xlabel='신장(5Cm단위)', ylabel='체중(5Kg단위)'>




    
![png](output_81_2.png)
    



```python
# swarmplot으로 연령대코드(5세단위)에 따른 음주여부 그리며, 성별코드에 따라 다른 색상으로 표현되게 합니다.
# 점을 하나씩 찍기 때문에 오래 걸리는 코드는 전체로 그려보기 전에 일부만 가져와 그려봅니다.

plt.figure(figsize=(15, 4))
sns.swarmplot(data=df_sample, x="연령대코드(5세단위)", y="혈색소", hue="음주여부")
```

    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 10.4% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 13.4% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 7.8% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 7.4% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/categorical.py:1296: UserWarning: 5.7% of the points cannot be placed; you may want to decrease the size of the markers or use stripplot.
      warnings.warn(msg, UserWarning)





    <AxesSubplot:xlabel='연령대코드(5세단위)', ylabel='혈색소'>




    
![png](output_82_2.png)
    



```python
# lmplot 으로 그리기

sns.lmplot(data=df_sample, x="연령대코드(5세단위)", y="혈색소", hue="음주여부", col="성별코드")
```




    <seaborn.axisgrid.FacetGrid at 0x7fce7064ca30>




    
![png](output_83_1.png)
    


## 수치형 데이터 시각화

### scatterplot - 산점도
* 수치형 vs 수치형 데이터의 상관 관계를 볼 때 주로 사용합니다.
* __점의 크기를 데이터의 수치에 따라 다르게 볼 수 있습니다.__


```python
# scatterplot 으로 "(혈청지오티)AST", "(혈청지오티)ALT" 을 그리고 음주여부에 따라 다른 색상으로 표현되게 합니다.

plt.figure(figsize=(8, 7))
sns.scatterplot(data=df_sample, x="(혈청지오티)AST", y="(혈청지오티)ALT", hue="음주여부", size="체중(5Kg단위)")
```




    <AxesSubplot:xlabel='(혈청지오티)AST', ylabel='(혈청지오티)ALT'>




    
![png](output_86_1.png)
    


### lmplot - 상관 관계를 보기


```python
# lmplot 으로 신장(5Cm단위)에 따른 체중(5Kg 단위) 을 그리며, 음주여부에 따라 다른 색상으로 표현되게 합니다.

sns.lmplot(data=df_sample, x="신장(5Cm단위)", y="체중(5Kg단위)", hue="음주여부", col="성별코드")
```




    <seaborn.axisgrid.FacetGrid at 0x7fce704f3730>




    
![png](output_88_1.png)
    



```python
# lmplot의 col기능을 통해 음주여부에 따라 서브플롯을 그려봅니다. 


sns.lmplot(data=df_sample, x="신장(5Cm단위)", y="체중(5Kg단위)", hue="성별코드", col="음주여부")
```




    <seaborn.axisgrid.FacetGrid at 0x7fce7016f340>




    
![png](output_89_1.png)
    



```python
# lmplot 으로 수축기, 이완기혈압을 그리고 음주여부에 따라 다른 색상으로 표현되게 합니다.

sns.lmplot(data=df_sample, x="수축기혈압", y="이완기혈압", hue="음주여부")
```




    <seaborn.axisgrid.FacetGrid at 0x7fce703a3490>




    
![png](output_90_1.png)
    


`AST와 ALT`
* 출처 : https://sev.iseverance.com/dept_clinic/center/liver/treatment/view.asp?con_no=87827


```
AST와 ALT는 간세포에 들어 있는 효소 입니다.

간이 손상돼 간세포가 파괴되면 그 안에 있던 AST와 ALT 가 빠져 나와 혈액 속에 섞여 돌아다니게 됩니다. 
따라서 간이 손상되면 AST와 ALT 수치가 높아집니다.

정상 수치는 병원에 따라 기준치가 다소 차이가 있으나 AST가 5~35 IU/L, ALT가 5~40 IU/L 정도 입니다.

 

간혹 전날 술을 마시거나 몸이 피곤하면 일시적으로 AST와 ALT 수치가 정상치를 웃돌 수 있으므로 딱 한 번의 검사만으로 간질환 여부를 판단하는 경우는 드뭅니다. 하지만 AST 와 ALT 같은 간수치는 간의 상태를 일차적으로 파악하는데 아주 중요한 기준이 됩니다.
```


```python
# lmplot으로 "(혈청지오티)AST", "(혈청지오티)ALT" 을 그리고 음주여부에 따라 다른 색상으로 표현되게 합니다.

sns.lmplot(data=df_sample, x="(혈청지오티)AST", y="(혈청지오티)ALT", hue="음주여부", robust=True)
```




    <seaborn.axisgrid.FacetGrid at 0x7fce797be340>




    
![png](output_92_1.png)
    


### Outliars 이상치 다루기

* 이상치가 있으면 데이터가 자세히 보이지 않거나 이상치로 인해 회귀선이 달라지기도 합니다.
* 시각화를 통해 찾은 이상치를 제거하고 보거나 이상치만 따로 모아 보도록 합니다.


```python
# "(혈청지오티)AST" 와 "(혈청지오티)ALT" 가 모두 400 이하인 값만
# logical 데이터프레임 형태로 추출해서 df_ASLT 라는 변수에 담습니다.

df_ASLT = df_sample[(df_sample["(혈청지오티)AST"] < 400) & (df_sample["(혈청지오티)ALT"] < 400)]
```


```python
# 이상치를 제거한 "(혈청지오티)AST" 와 "(혈청지오티)ALT" 를 lmplot으로 그리며 
# 음주여부에 따라 다른 색으로 표현합니다.

sns.lmplot(data=df_ASLT,  x="(혈청지오티)AST", y="(혈청지오티)ALT", hue="음주여부", ci=None)
```




    <seaborn.axisgrid.FacetGrid at 0x7fce7458cac0>




    
![png](output_95_1.png)
    



```python
# "(혈청지오티)AST" 또는 "(혈청지오티)ALT" 가 400 이상인 값만 데이터프레임 형태로 추출해서 df_ASLT_high 라는 변수에 담습니다.

df_ASLT_high = df[(df["(혈청지오티)AST"] > 400) | (df["(혈청지오티)ALT"] > 400)]
sns.lmplot(data=df_ASLT_high, x="(혈청지오티)AST", y="(혈청지오티)ALT", hue="음주여부", ci=None)

```




    <seaborn.axisgrid.FacetGrid at 0x7fce745e12e0>




    
![png](output_96_1.png)
    



```python
# 위에서 구한 df_ASLT_high 데이터 프레임에 담겨진 혈청지오티가 높은 데이터만 따로 봅니다.

df_ASLT_high_8000 = df_ASLT_high[df_ASLT_high["(혈청지오티)AST"] > 8000]
df_ASLT_high_8000.shape

```




    (1, 34)




```python
df_ASLT_high_8000.iloc[:, 10:27]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>청력(좌)</th>
      <th>청력(우)</th>
      <th>수축기혈압</th>
      <th>이완기혈압</th>
      <th>식전혈당(공복혈당)</th>
      <th>총콜레스테롤</th>
      <th>트리글리세라이드</th>
      <th>HDL콜레스테롤</th>
      <th>LDL콜레스테롤</th>
      <th>혈색소</th>
      <th>요단백</th>
      <th>혈청크레아티닌</th>
      <th>(혈청지오티)AST</th>
      <th>(혈청지오티)ALT</th>
      <th>감마지티피</th>
      <th>흡연상태</th>
      <th>음주여부</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>541757</th>
      <td>1.0</td>
      <td>1.0</td>
      <td>96.0</td>
      <td>74.0</td>
      <td>93.0</td>
      <td>161.0</td>
      <td>67.0</td>
      <td>78.0</td>
      <td>69.0</td>
      <td>15.4</td>
      <td>1.0</td>
      <td>1.2</td>
      <td>9999.0</td>
      <td>380.0</td>
      <td>419.0</td>
      <td>3.0</td>
      <td>Y</td>
    </tr>
  </tbody>
</table>
</div>



### distplot
* [히스토그램 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%ED%9E%88%EC%8A%A4%ED%86%A0%EA%B7%B8%EB%9E%A8)
* [확률 밀도 함수 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%ED%99%95%EB%A5%A0_%EB%B0%80%EB%8F%84_%ED%95%A8%EC%88%98)


```python
 # Dtype 확인 수치형 / object

df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 1000000 entries, 0 to 999999
    Data columns (total 34 columns):
     #   Column        Non-Null Count    Dtype  
    ---  ------        --------------    -----  
     0   기준년도          1000000 non-null  int64  
     1   가입자일련번호       1000000 non-null  int64  
     2   성별코드          1000000 non-null  int64  
     3   연령대코드(5세단위)   1000000 non-null  int64  
     4   시도코드          1000000 non-null  int64  
     5   신장(5Cm단위)     1000000 non-null  int64  
     6   체중(5Kg단위)     1000000 non-null  int64  
     7   허리둘레          999734 non-null   float64
     8   시력(좌)         999817 non-null   float64
     9   시력(우)         999811 non-null   float64
     10  청력(좌)         999842 non-null   float64
     11  청력(우)         999844 non-null   float64
     12  수축기혈압         999981 non-null   float64
     13  이완기혈압         999982 non-null   float64
     14  식전혈당(공복혈당)    999958 non-null   float64
     15  총콜레스테롤        999957 non-null   float64
     16  트리글리세라이드      999955 non-null   float64
     17  HDL콜레스테롤      999956 non-null   float64
     18  LDL콜레스테롤      997088 non-null   float64
     19  혈색소           999948 non-null   float64
     20  요단백           995408 non-null   float64
     21  혈청크레아티닌       999957 non-null   float64
     22  (혈청지오티)AST    999959 non-null   float64
     23  (혈청지오티)ALT    999958 non-null   float64
     24  감마지티피         999958 non-null   float64
     25  흡연상태          999856 non-null   float64
     26  음주여부          999464 non-null   object 
     27  구강검진수검여부      1000000 non-null  object 
     28  치아우식증유무       0 non-null        float64
     29  결손치유무         0 non-null        float64
     30  치아마모증유무       0 non-null        float64
     31  제3대구치(사랑니)이상  0 non-null        float64
     32  치석            378578 non-null   object 
     33  데이터공개일자       1000000 non-null  object 
    dtypes: float64(23), int64(7), object(4)
    memory usage: 259.4+ MB



```python
df["총콜레스테롤"].isnull().sum() # null 43 개 확인
```




    43




```python
df["총콜레스테롤"].shape
```




    (1000000,)




```python
df_chol = df.loc[df["총콜레스테롤"].notnull(), "총콜레스테롤"] # null 값 제외하고 (43개) 불러오기
df_chol.head()
```




    0    193.0
    1    228.0
    2    136.0
    3    201.0
    4    199.0
    Name: 총콜레스테롤, dtype: float64




```python
df_chol.describe()
```




    count    999957.000000
    mean        195.548251
    std          38.718205
    min          30.000000
    25%         169.000000
    50%         193.000000
    75%         219.000000
    max        2344.000000
    Name: 총콜레스테롤, dtype: float64




```python
# "총콜레스테롤" 에 따른 distplot 을 그립니다.

sns.distplot(df_chol)
```

    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/distributions.py:2551: FutureWarning: `distplot` is a deprecated function and will be removed in a future version. Please adapt your code to use either `displot` (a figure-level function with similar flexibility) or `histplot` (an axes-level function for histograms).
      warnings.warn(msg, FutureWarning)





    <AxesSubplot:xlabel='총콜레스테롤', ylabel='Density'>




    
![png](output_105_2.png)
    



```python
# 음주여부가 1인 값에 대한 "총콜레스테롤" 을 distplot 으로 그립니다.

sns.distplot(df.loc[df["총콜레스테롤"].notnull() & (df["음주여부"] == 1), "총콜레스테롤"])
```

    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/distributions.py:2551: FutureWarning: `distplot` is a deprecated function and will be removed in a future version. Please adapt your code to use either `displot` (a figure-level function with similar flexibility) or `histplot` (an axes-level function for histograms).
      warnings.warn(msg, FutureWarning)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/seaborn/distributions.py:2589: RuntimeWarning: Mean of empty slice.
      line, = ax.plot(a.mean(), 0)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/numpy/core/_methods.py:170: RuntimeWarning: invalid value encountered in double_scalars
      ret = ret.dtype.type(ret / rcount)
    /Users/daeheehan/opt/anaconda3/lib/python3.8/site-packages/numpy/lib/histograms.py:905: RuntimeWarning: invalid value encountered in true_divide
      return n/db/n.sum(), bin_edges





    <AxesSubplot:xlabel='총콜레스테롤'>




    
![png](output_106_2.png)
    



```python
# 음주여부가 0인 값에 대한 "총콜레스테롤" 을 distplot 으로 그립니다.

sns.distplot(df.loc[
    df["총콜레스테롤"].notnull() & (df["음주여부"] == 0), 
    "총콜레스테롤"])
```




    <AxesSubplot:xlabel='총콜레스테롤'>




    
![png](output_107_1.png)
    



```python
# 음주여부 값에 대한 "총콜레스테롤" 을 distplot 으로 그리며, 하나의 그래프에 표시되도록 합니다.

plt.axvline(df_sample["총콜레스테롤"].mean(), linestyle=":")
plt.axvline(df_sample["총콜레스테롤"].median(), linestyle="--")
sns.kdeplot(df_sample.loc[
    df_sample["총콜레스테롤"].notnull() & (df["음주여부"] == 1), 
    "총콜레스테롤"], label="음주 중")
sns.kdeplot(df_sample.loc[
    df_sample["총콜레스테롤"].notnull() & (df["음주여부"] == 0), 
    "총콜레스테롤"], label="음주 안 함")
```




    <AxesSubplot:>




    
![png](output_108_1.png)
    



```python
# 감마지티피 값에 따라 음주여부를 시각화 합니다.

s_1 = df_sample.loc[df_sample["음주여부"] == 1, "감마지티피"]
s_0 = df_sample.loc[df_sample["음주여부"] == 0, "감마지티피"]

sns.kdeplot(s_1, label="음주 중")
sns.kdeplot(s_0, label="음주 안 함")
```




    <AxesSubplot:>




    
![png](output_109_1.png)
    


## 상관 분석
* [상관 분석 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%EC%83%81%EA%B4%80_%EB%B6%84%EC%84%9D)

```
r이 -1.0과 -0.7 사이이면, 강한 음적 선형관계,
r이 -0.7과 -0.3 사이이면, 뚜렷한 음적 선형관계,
r이 -0.3과 -0.1 사이이면, 약한 음적 선형관계,
r이 -0.1과 +0.1 사이이면, 거의 무시될 수 있는 선형관계,
r이 +0.1과 +0.3 사이이면, 약한 양적 선형관계,
r이 +0.3과 +0.7 사이이면, 뚜렷한 양적 선형관계,
r이 +0.7과 +1.0 사이이면, 강한 양적 선형관계
```


```python
df.columns
```




    Index(['기준년도', '가입자일련번호', '성별코드', '연령대코드(5세단위)', '시도코드', '신장(5Cm단위)',
           '체중(5Kg단위)', '허리둘레', '시력(좌)', '시력(우)', '청력(좌)', '청력(우)', '수축기혈압',
           '이완기혈압', '식전혈당(공복혈당)', '총콜레스테롤', '트리글리세라이드', 'HDL콜레스테롤', 'LDL콜레스테롤',
           '혈색소', '요단백', '혈청크레아티닌', '(혈청지오티)AST', '(혈청지오티)ALT', '감마지티피', '흡연상태',
           '음주여부', '구강검진수검여부', '치아우식증유무', '결손치유무', '치아마모증유무', '제3대구치(사랑니)이상', '치석',
           '데이터공개일자'],
          dtype='object')




```python
# 상관계수에 사용할 컬럼을 변수에 담습니다.
columns = ['연령대코드(5세단위)', '체중(5Kg단위)', '신장(5Cm단위)', '허리둘레', 
           '시력(좌)', '시력(우)', '청력(좌)', '청력(우)', 
           '수축기혈압', '이완기혈압', '식전혈당(공복혈당)', 
           '총콜레스테롤', '트리글리세라이드', 'HDL콜레스테롤', 'LDL콜레스테롤', '혈색소', '요단백', 
           '혈청크레아티닌', '(혈청지오티)AST', '(혈청지오티)ALT', '감마지티피', '흡연상태', '음주여부']


```


```python
len(columns)
```




    23



### 상관계수 구하기


```python
# 샘플컬럼만 가져와서 df_small 이라는 데이터프레임에 담은 뒤 상관계수를 구합니다.

df_small = df_sample[columns]
df_corr  = df_small.corr() # 수치형 데이터만 연산



```


```python

```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>연령대코드(5세단위)</th>
      <th>체중(5Kg단위)</th>
      <th>신장(5Cm단위)</th>
      <th>허리둘레</th>
      <th>시력(좌)</th>
      <th>시력(우)</th>
      <th>청력(좌)</th>
      <th>청력(우)</th>
      <th>수축기혈압</th>
      <th>이완기혈압</th>
      <th>...</th>
      <th>트리글리세라이드</th>
      <th>HDL콜레스테롤</th>
      <th>LDL콜레스테롤</th>
      <th>혈색소</th>
      <th>요단백</th>
      <th>혈청크레아티닌</th>
      <th>(혈청지오티)AST</th>
      <th>(혈청지오티)ALT</th>
      <th>감마지티피</th>
      <th>흡연상태</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>연령대코드(5세단위)</th>
      <td>1.000000</td>
      <td>-0.200336</td>
      <td>-0.380239</td>
      <td>0.159797</td>
      <td>-0.217613</td>
      <td>-0.308829</td>
      <td>0.233960</td>
      <td>0.264549</td>
      <td>0.222408</td>
      <td>0.091006</td>
      <td>...</td>
      <td>0.037474</td>
      <td>-0.095972</td>
      <td>0.008560</td>
      <td>-0.178977</td>
      <td>0.058702</td>
      <td>0.044958</td>
      <td>0.129357</td>
      <td>-0.009871</td>
      <td>-0.015357</td>
      <td>-0.121132</td>
    </tr>
    <tr>
      <th>체중(5Kg단위)</th>
      <td>-0.200336</td>
      <td>1.000000</td>
      <td>0.665067</td>
      <td>0.785950</td>
      <td>0.122194</td>
      <td>0.168929</td>
      <td>-0.043727</td>
      <td>-0.047717</td>
      <td>0.288983</td>
      <td>0.324783</td>
      <td>...</td>
      <td>0.260689</td>
      <td>-0.330577</td>
      <td>0.043839</td>
      <td>0.540191</td>
      <td>0.012154</td>
      <td>0.170468</td>
      <td>0.193976</td>
      <td>0.401756</td>
      <td>0.246924</td>
      <td>0.392874</td>
    </tr>
    <tr>
      <th>신장(5Cm단위)</th>
      <td>-0.380239</td>
      <td>0.665067</td>
      <td>1.000000</td>
      <td>0.312230</td>
      <td>0.202426</td>
      <td>0.236260</td>
      <td>-0.064044</td>
      <td>-0.074738</td>
      <td>0.063929</td>
      <td>0.157810</td>
      <td>...</td>
      <td>0.135087</td>
      <td>-0.207537</td>
      <td>0.008146</td>
      <td>0.541155</td>
      <td>-0.007699</td>
      <td>0.212811</td>
      <td>0.055783</td>
      <td>0.159199</td>
      <td>0.185091</td>
      <td>0.512294</td>
    </tr>
    <tr>
      <th>허리둘레</th>
      <td>0.159797</td>
      <td>0.785950</td>
      <td>0.312230</td>
      <td>1.000000</td>
      <td>0.017355</td>
      <td>0.030809</td>
      <td>0.050644</td>
      <td>0.073086</td>
      <td>0.349219</td>
      <td>0.329256</td>
      <td>...</td>
      <td>0.267643</td>
      <td>-0.311478</td>
      <td>0.017287</td>
      <td>0.377673</td>
      <td>0.045948</td>
      <td>0.131421</td>
      <td>0.253549</td>
      <td>0.407063</td>
      <td>0.234831</td>
      <td>0.246296</td>
    </tr>
    <tr>
      <th>시력(좌)</th>
      <td>-0.217613</td>
      <td>0.122194</td>
      <td>0.202426</td>
      <td>0.017355</td>
      <td>1.000000</td>
      <td>0.346265</td>
      <td>-0.039499</td>
      <td>-0.081000</td>
      <td>-0.012888</td>
      <td>0.027854</td>
      <td>...</td>
      <td>0.032493</td>
      <td>-0.045579</td>
      <td>-0.052768</td>
      <td>0.142582</td>
      <td>-0.024741</td>
      <td>0.022175</td>
      <td>0.011212</td>
      <td>0.080793</td>
      <td>0.111903</td>
      <td>0.141441</td>
    </tr>
    <tr>
      <th>시력(우)</th>
      <td>-0.308829</td>
      <td>0.168929</td>
      <td>0.236260</td>
      <td>0.030809</td>
      <td>0.346265</td>
      <td>1.000000</td>
      <td>-0.072118</td>
      <td>-0.102880</td>
      <td>-0.036395</td>
      <td>0.001282</td>
      <td>...</td>
      <td>0.070753</td>
      <td>-0.068572</td>
      <td>0.003336</td>
      <td>0.190303</td>
      <td>-0.024977</td>
      <td>0.080797</td>
      <td>0.003236</td>
      <td>0.123455</td>
      <td>0.035304</td>
      <td>0.089486</td>
    </tr>
    <tr>
      <th>청력(좌)</th>
      <td>0.233960</td>
      <td>-0.043727</td>
      <td>-0.064044</td>
      <td>0.050644</td>
      <td>-0.039499</td>
      <td>-0.072118</td>
      <td>1.000000</td>
      <td>0.565295</td>
      <td>0.039115</td>
      <td>-0.015526</td>
      <td>...</td>
      <td>0.018695</td>
      <td>-0.047898</td>
      <td>0.006018</td>
      <td>-0.000433</td>
      <td>0.041231</td>
      <td>0.016792</td>
      <td>0.020671</td>
      <td>0.044048</td>
      <td>-0.025004</td>
      <td>0.007413</td>
    </tr>
    <tr>
      <th>청력(우)</th>
      <td>0.264549</td>
      <td>-0.047717</td>
      <td>-0.074738</td>
      <td>0.073086</td>
      <td>-0.081000</td>
      <td>-0.102880</td>
      <td>0.565295</td>
      <td>1.000000</td>
      <td>0.056661</td>
      <td>-0.005658</td>
      <td>...</td>
      <td>0.034650</td>
      <td>-0.069527</td>
      <td>-0.032362</td>
      <td>-0.050208</td>
      <td>0.081749</td>
      <td>0.017758</td>
      <td>-0.004681</td>
      <td>-0.019893</td>
      <td>-0.024936</td>
      <td>-0.042159</td>
    </tr>
    <tr>
      <th>수축기혈압</th>
      <td>0.222408</td>
      <td>0.288983</td>
      <td>0.063929</td>
      <td>0.349219</td>
      <td>-0.012888</td>
      <td>-0.036395</td>
      <td>0.039115</td>
      <td>0.056661</td>
      <td>1.000000</td>
      <td>0.751731</td>
      <td>...</td>
      <td>0.233447</td>
      <td>-0.093036</td>
      <td>-0.007070</td>
      <td>0.169241</td>
      <td>0.043110</td>
      <td>0.034018</td>
      <td>0.133472</td>
      <td>0.163762</td>
      <td>0.191333</td>
      <td>0.094145</td>
    </tr>
    <tr>
      <th>이완기혈압</th>
      <td>0.091006</td>
      <td>0.324783</td>
      <td>0.157810</td>
      <td>0.329256</td>
      <td>0.027854</td>
      <td>0.001282</td>
      <td>-0.015526</td>
      <td>-0.005658</td>
      <td>0.751731</td>
      <td>1.000000</td>
      <td>...</td>
      <td>0.225436</td>
      <td>-0.091701</td>
      <td>0.038887</td>
      <td>0.255690</td>
      <td>0.035826</td>
      <td>0.081965</td>
      <td>0.131482</td>
      <td>0.191155</td>
      <td>0.200150</td>
      <td>0.144974</td>
    </tr>
    <tr>
      <th>식전혈당(공복혈당)</th>
      <td>0.215097</td>
      <td>0.164926</td>
      <td>0.005997</td>
      <td>0.235417</td>
      <td>-0.041152</td>
      <td>-0.043653</td>
      <td>0.012104</td>
      <td>0.069277</td>
      <td>0.218697</td>
      <td>0.160601</td>
      <td>...</td>
      <td>0.230639</td>
      <td>-0.132477</td>
      <td>0.043905</td>
      <td>0.124883</td>
      <td>0.138626</td>
      <td>0.030580</td>
      <td>0.177067</td>
      <td>0.193795</td>
      <td>0.115353</td>
      <td>0.074190</td>
    </tr>
    <tr>
      <th>총콜레스테롤</th>
      <td>-0.008847</td>
      <td>0.050713</td>
      <td>-0.004133</td>
      <td>0.036389</td>
      <td>-0.052320</td>
      <td>0.016831</td>
      <td>0.008247</td>
      <td>-0.047907</td>
      <td>0.039290</td>
      <td>0.084102</td>
      <td>...</td>
      <td>0.230012</td>
      <td>0.025190</td>
      <td>0.861641</td>
      <td>0.087261</td>
      <td>0.116156</td>
      <td>-0.031429</td>
      <td>0.013772</td>
      <td>0.065708</td>
      <td>0.053055</td>
      <td>0.001728</td>
    </tr>
    <tr>
      <th>트리글리세라이드</th>
      <td>0.037474</td>
      <td>0.260689</td>
      <td>0.135087</td>
      <td>0.267643</td>
      <td>0.032493</td>
      <td>0.070753</td>
      <td>0.018695</td>
      <td>0.034650</td>
      <td>0.233447</td>
      <td>0.225436</td>
      <td>...</td>
      <td>1.000000</td>
      <td>-0.312560</td>
      <td>0.064503</td>
      <td>0.220292</td>
      <td>0.083164</td>
      <td>0.040199</td>
      <td>0.153717</td>
      <td>0.202813</td>
      <td>0.271554</td>
      <td>0.154560</td>
    </tr>
    <tr>
      <th>HDL콜레스테롤</th>
      <td>-0.095972</td>
      <td>-0.330577</td>
      <td>-0.207537</td>
      <td>-0.311478</td>
      <td>-0.045579</td>
      <td>-0.068572</td>
      <td>-0.047898</td>
      <td>-0.069527</td>
      <td>-0.093036</td>
      <td>-0.091701</td>
      <td>...</td>
      <td>-0.312560</td>
      <td>1.000000</td>
      <td>-0.162307</td>
      <td>-0.252492</td>
      <td>-0.058606</td>
      <td>-0.141626</td>
      <td>-0.060252</td>
      <td>-0.169802</td>
      <td>-0.067822</td>
      <td>-0.213555</td>
    </tr>
    <tr>
      <th>LDL콜레스테롤</th>
      <td>0.008560</td>
      <td>0.043839</td>
      <td>0.008146</td>
      <td>0.017287</td>
      <td>-0.052768</td>
      <td>0.003336</td>
      <td>0.006018</td>
      <td>-0.032362</td>
      <td>-0.007070</td>
      <td>0.038887</td>
      <td>...</td>
      <td>0.064503</td>
      <td>-0.162307</td>
      <td>1.000000</td>
      <td>0.068631</td>
      <td>0.092367</td>
      <td>-0.013668</td>
      <td>-0.011918</td>
      <td>0.022981</td>
      <td>0.007599</td>
      <td>0.025842</td>
    </tr>
    <tr>
      <th>혈색소</th>
      <td>-0.178977</td>
      <td>0.540191</td>
      <td>0.541155</td>
      <td>0.377673</td>
      <td>0.142582</td>
      <td>0.190303</td>
      <td>-0.000433</td>
      <td>-0.050208</td>
      <td>0.169241</td>
      <td>0.255690</td>
      <td>...</td>
      <td>0.220292</td>
      <td>-0.252492</td>
      <td>0.068631</td>
      <td>1.000000</td>
      <td>0.039249</td>
      <td>0.108274</td>
      <td>0.224768</td>
      <td>0.331891</td>
      <td>0.245109</td>
      <td>0.434467</td>
    </tr>
    <tr>
      <th>요단백</th>
      <td>0.058702</td>
      <td>0.012154</td>
      <td>-0.007699</td>
      <td>0.045948</td>
      <td>-0.024741</td>
      <td>-0.024977</td>
      <td>0.041231</td>
      <td>0.081749</td>
      <td>0.043110</td>
      <td>0.035826</td>
      <td>...</td>
      <td>0.083164</td>
      <td>-0.058606</td>
      <td>0.092367</td>
      <td>0.039249</td>
      <td>1.000000</td>
      <td>0.062413</td>
      <td>0.026967</td>
      <td>0.033513</td>
      <td>0.117621</td>
      <td>0.092105</td>
    </tr>
    <tr>
      <th>혈청크레아티닌</th>
      <td>0.044958</td>
      <td>0.170468</td>
      <td>0.212811</td>
      <td>0.131421</td>
      <td>0.022175</td>
      <td>0.080797</td>
      <td>0.016792</td>
      <td>0.017758</td>
      <td>0.034018</td>
      <td>0.081965</td>
      <td>...</td>
      <td>0.040199</td>
      <td>-0.141626</td>
      <td>-0.013668</td>
      <td>0.108274</td>
      <td>0.062413</td>
      <td>1.000000</td>
      <td>0.029414</td>
      <td>0.041525</td>
      <td>0.084645</td>
      <td>0.151747</td>
    </tr>
    <tr>
      <th>(혈청지오티)AST</th>
      <td>0.129357</td>
      <td>0.193976</td>
      <td>0.055783</td>
      <td>0.253549</td>
      <td>0.011212</td>
      <td>0.003236</td>
      <td>0.020671</td>
      <td>-0.004681</td>
      <td>0.133472</td>
      <td>0.131482</td>
      <td>...</td>
      <td>0.153717</td>
      <td>-0.060252</td>
      <td>-0.011918</td>
      <td>0.224768</td>
      <td>0.026967</td>
      <td>0.029414</td>
      <td>1.000000</td>
      <td>0.722901</td>
      <td>0.531529</td>
      <td>0.081326</td>
    </tr>
    <tr>
      <th>(혈청지오티)ALT</th>
      <td>-0.009871</td>
      <td>0.401756</td>
      <td>0.159199</td>
      <td>0.407063</td>
      <td>0.080793</td>
      <td>0.123455</td>
      <td>0.044048</td>
      <td>-0.019893</td>
      <td>0.163762</td>
      <td>0.191155</td>
      <td>...</td>
      <td>0.202813</td>
      <td>-0.169802</td>
      <td>0.022981</td>
      <td>0.331891</td>
      <td>0.033513</td>
      <td>0.041525</td>
      <td>0.722901</td>
      <td>1.000000</td>
      <td>0.424481</td>
      <td>0.168947</td>
    </tr>
    <tr>
      <th>감마지티피</th>
      <td>-0.015357</td>
      <td>0.246924</td>
      <td>0.185091</td>
      <td>0.234831</td>
      <td>0.111903</td>
      <td>0.035304</td>
      <td>-0.025004</td>
      <td>-0.024936</td>
      <td>0.191333</td>
      <td>0.200150</td>
      <td>...</td>
      <td>0.271554</td>
      <td>-0.067822</td>
      <td>0.007599</td>
      <td>0.245109</td>
      <td>0.117621</td>
      <td>0.084645</td>
      <td>0.531529</td>
      <td>0.424481</td>
      <td>1.000000</td>
      <td>0.180186</td>
    </tr>
    <tr>
      <th>흡연상태</th>
      <td>-0.121132</td>
      <td>0.392874</td>
      <td>0.512294</td>
      <td>0.246296</td>
      <td>0.141441</td>
      <td>0.089486</td>
      <td>0.007413</td>
      <td>-0.042159</td>
      <td>0.094145</td>
      <td>0.144974</td>
      <td>...</td>
      <td>0.154560</td>
      <td>-0.213555</td>
      <td>0.025842</td>
      <td>0.434467</td>
      <td>0.092105</td>
      <td>0.151747</td>
      <td>0.081326</td>
      <td>0.168947</td>
      <td>0.180186</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
<p>22 rows × 22 columns</p>
</div>




```python
# 키에 대한 상관계수가 특정 수치 이상인 데이터를 봅니다.

df_corr.loc[df_corr["신장(5Cm단위)"] > 0.1, "신장(5Cm단위)"]
```




    체중(5Kg단위)     0.665067
    신장(5Cm단위)     1.000000
    허리둘레          0.312230
    시력(좌)         0.202426
    시력(우)         0.236260
    이완기혈압         0.157810
    트리글리세라이드      0.135087
    혈색소           0.541155
    혈청크레아티닌       0.212811
    (혈청지오티)ALT    0.159199
    감마지티피         0.185091
    흡연상태          0.512294
    Name: 신장(5Cm단위), dtype: float64




```python
# 음주여부에 대한 상관계수가 특정 수치 이상인 데이터를 봅니다.
# 업데이트된 음주여부 데이터가 Y/N object 데이터 이므로 1/0 수치형 데이터로 변경 해줘야 합니다.

df_corr.loc[df_corr["음주여부"] > 0.25,"음주여부"]
```


    ---------------------------------------------------------------------------

    KeyError                                  Traceback (most recent call last)

    ~/opt/anaconda3/lib/python3.8/site-packages/pandas/core/indexes/base.py in get_loc(self, key, method, tolerance)
       2894             try:
    -> 2895                 return self._engine.get_loc(casted_key)
       2896             except KeyError as err:


    pandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()


    pandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()


    pandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()


    pandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()


    KeyError: '음주여부'

    
    The above exception was the direct cause of the following exception:


    KeyError                                  Traceback (most recent call last)

    <ipython-input-93-da45deb19f59> in <module>
          2 # 업데이트된 음주여부 데이터가 Y/N object 데이터 이므로 1/0 수치형 데이터로 변경 해줘야 합니ㅏㄷ.
          3 
    ----> 4 df_corr.loc[df_corr["음주여부"] > 0.25,"음주여부"]
    

    ~/opt/anaconda3/lib/python3.8/site-packages/pandas/core/frame.py in __getitem__(self, key)
       2900             if self.columns.nlevels > 1:
       2901                 return self._getitem_multilevel(key)
    -> 2902             indexer = self.columns.get_loc(key)
       2903             if is_integer(indexer):
       2904                 indexer = [indexer]


    ~/opt/anaconda3/lib/python3.8/site-packages/pandas/core/indexes/base.py in get_loc(self, key, method, tolerance)
       2895                 return self._engine.get_loc(casted_key)
       2896             except KeyError as err:
    -> 2897                 raise KeyError(key) from err
       2898 
       2899         if tolerance is not None:


    KeyError: '음주여부'



```python
# 혈색소에 대한 상관계수가 특정 수치 이상인 데이터를 봅니다.

df_corr["혈색소"].sort_values(ascending=False).head(7)
```




    혈색소           1.000000
    신장(5Cm단위)     0.541155
    체중(5Kg단위)     0.540191
    흡연상태          0.434467
    허리둘레          0.377673
    (혈청지오티)ALT    0.331891
    이완기혈압         0.255690
    Name: 혈색소, dtype: float64




```python
# 감마지티피에 대한 상관계수가 특정 수치 이상인 데이터를 봅니다.

df_corr["감마지티피"].sort_values(ascending=False).head(7)
```




    감마지티피         1.000000
    (혈청지오티)AST    0.531529
    (혈청지오티)ALT    0.424481
    트리글리세라이드      0.271554
    체중(5Kg단위)     0.246924
    혈색소           0.245109
    허리둘레          0.234831
    Name: 감마지티피, dtype: float64



### heatmap
* [Plotting a diagonal correlation matrix — seaborn 0.10.0 documentation](https://seaborn.pydata.org/examples/many_pairwise_correlations.html)


```python
# 위에서 구한 상관계수를 heatmap을 통해 표현해 봅니다.

plt.figure(figsize=(20, 7))
sns.heatmap(df_corr, annot=True, fmt=".2f", cmap="coolwarm")
```




    <AxesSubplot:>




    
![png](output_122_1.png)
    



```python
mask = np.triu(np.ones_like(df_corr, dtype=np.bool))

plt.figure(figsize=(20, 7))
sns.heatmap(df_corr, annot=True, fmt=".2f", cmap="coolwarm", mask=mask)
```




    <AxesSubplot:>




    
![png](output_123_1.png)
    

